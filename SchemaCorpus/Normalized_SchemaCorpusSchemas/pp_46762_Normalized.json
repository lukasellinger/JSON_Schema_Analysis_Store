{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/hslayers/hslayers-ng/develop/components/compositions/schema.js",
  "type": "object",
  "title": "Schema of map compositions supported in Hslayers-ng",
  "required": [
    "abstract",
    "title",
    "extent",
    "projection",
    "layers"
  ],
  "properties": {
    "abstract": {
      "type": "string",
      "title": "The Abstract Schema",
      "default": "",
      "examples": [
        "Na mapě jsou zobrazené třídy ochrany půdy v Libereckém kraji"
      ],
      "pattern": "^(.*)$"
    },
    "name": {
      "type": "string",
      "title": "Same as #/properties/abstract for backwards compatibility",
      "default": "",
      "examples": [
        "Na mapě jsou zobrazené třídy ochrany půdy v Libereckém kraji"
      ],
      "pattern": "^(.*)$"
    },
    "title": {
      "type": "string",
      "title": "The Title Schema",
      "default": "",
      "examples": [
        "Třídy ochrany půdy"
      ],
      "pattern": "^(.*)$"
    },
    "extent": {
      "type": "array",
      "title": "Composition extent in EPSG:4326",
      "items": {
        "type": "string",
        "title": "The Items Schema",
        "default": "",
        "examples": [
          "14.62",
          "50.58",
          "15.42",
          "50.82"
        ],
        "pattern": "^(.*)$"
      }
    },
    "user": {
      "type": "object",
      "title": "The User Schema",
      "description": "Used in status manager but not in hslayers",
      "required": [
        "email",
        "name"
      ],
      "properties": {
        "email": {
          "type": "string",
          "title": "The Email Schema",
          "default": "",
          "examples": [
            "dmitrii@seznam.cz"
          ],
          "pattern": "^(.*)$"
        },
        "name": {
          "type": "string",
          "title": "The Name Schema",
          "default": "",
          "examples": [
            "Dmitrij Kožuch"
          ],
          "pattern": "^(.*)$"
        }
      }
    },
    "groups": {
      "type": "object",
      "title": "The Groups Schema",
      "description": "Used in status manager but not in hslayers",
      "required": [
        "guest"
      ],
      "properties": {
        "guest": {
          "type": "string",
          "title": "The Guest Schema",
          "default": "",
          "examples": [
            "r"
          ],
          "pattern": "^(.*)$"
        }
      }
    },
    "scale": {
      "type": "number",
      "description": "Currently not supported in HsLayers",
      "title": "The Scale Schema",
      "default": 0,
      "examples": [
        1
      ]
    },
    "projection": {
      "type": "string",
      "title": "The Projection Schema",
      "default": "",
      "examples": [
        "epsg:3857",
        "EPSG:4326"
      ],
      "pattern": "^(.*)$"
    },
    "center": {
      "type": "array",
      "title": "Center of composition",
      "description": "Currently not supported in HsLayers",
      "items": {
        "type": "number",
        "title": "The Items Schema",
        "default": 0,
        "examples": [
          1672068,
          6568819
        ]
      }
    },
    "units": {
      "type": "string",
      "title": "The Units Schema",
      "description": "Currently not supported in HsLayers",
      "default": "",
      "examples": [
        "degrees",
        "imperial",
        "nautical",
        "metric",
        "us"
      ],
      "pattern": "^(.*)$"
    },
    "layers": {
      "type": "array",
      "title": "The Layers Schema",
      "items": {
        "type": "object",
        "title": "The Items Schema",
        "required": [
          "metadata",
          "visibility",
          "title",
          "className"
        ],
        "properties": {
          "metadata": {
            "type": "object",
            "title": "The Metadata Schema"
          },
          "visibility": {
            "type": "boolean",
            "title": "Visibility",
            "default": false,
            "examples": [
              true
            ]
          },
          "base": {
            "type": "boolean",
            "title": "Base layer",
            "description": "Is the layer one of the base layers",
            "default": false,
            "examples": [
              true
            ]
          },
          "opacity": {
            "type": [
              "string",
              "number"
            ],
            "title": "Opacity",
            "default": "",
            "examples": [
              "1"
            ],
            "pattern": "^(.*)$"
          },
          "path": {
            "type": "string",
            "title": "Path of folder structure to group the layer into",
            "default": "",
            "examples": [
              "Climatic data/Time layers"
            ],
            "pattern": "^(.*)$"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "default": "",
            "examples": [
              "Třídy ochrany půdy"
            ],
            "pattern": "^(.*)$"
          },
          "className": {
            "type": "string",
            "title": "Classname",
            "description": "Big type of layer. Currently all raster layers are wms layers and Vector layers are subdivided by protocol property",
            "default": "",
            "enum": [
              "HSLayers.Layer.WMS",
              "OpenLayers.Layer.Vector",
              "WMS",
              "WFS",
              "Vector",
              "XYZ",
              "ArcGISRest",
              "StaticImage"
            ],
            "examples": [
              "HSLayers.Layer.WMS"
            ],
            "pattern": "^(.*)$"
          },
          "singleTile": {
            "type": "boolean",
            "title": "Single tile requests",
            "description": "Use single request to WMS provider to get map for the whole screen",
            "default": false,
            "examples": [
              true
            ]
          },
          "displayInLayerSwitcher": {
            "type": "boolean",
            "title": "Visibility of layer in layer switcher",
            "default": true,
            "examples": [
              true
            ]
          },
          "wmsMaxScale": {
            "type": "number",
            "title": "Wmsmaxscale",
            "description": "Deprecated maxScale property used in old OpenLayers2. Is here just for historical reasons",
            "default": 0,
            "examples": [
              0
            ]
          },
          "legends": {
            "type": "array",
            "title": "The Legends Schema",
            "items": {
              "type": "string",
              "title": "The Items Schema",
              "default": "",
              "examples": [
                [
                  "https%3A%2F%2Fgeoportal.kraj-lbc.cz%2Fcgi-bin%2Fmapserv%3Fmap%3D%2Fdata%2Fgis%2FMapServer%2Fprojects%2Fwms%2Fatlas%2Fpuda.map%26version%3D1.3.0%26service%3DWMS%26request%3DGetLegendGraphic%26sld_version%3D1.1.0%26layer%3Dtridyochrany%26format%3Dimage%2Fpng%26STYLE%3Ddefault"
                ]
              ],
              "pattern": "^(.*)$"
            }
          },
          "protocol": {
            "type": "object",
            "title": "The Protocol Schema",
            "properties": {
              "format": {
                "type": "string",
                "enum": [
                  "ol.format.KML",
                  "ol.format.GeoJSON",
                  "hs.format.WFS",
                  "hs.format.Sparql"
                ],
                "title": "Layer procol format"
              },
              "url": {
                "type": "string",
                "title": "URL to load geojson, kml and other data from"
              }
            }
          },
          "attribution": {
            "type": "object",
            "title": "Attribution",
            "properties": {
              "OnlineResource": {
                "type": "string",
                "title": "Url of layer attribution",
                "examples": [
                  "https://www.openstreetmap.org/copyright"
                ]
              },
              "Title": {
                "type": "string",
                "title": "Human readable attribution",
                "examples": [
                  "OpenStreetMap"
                ]
              }
            }
          },
          "features": {
            "type": "string",
            "title": "GeoJSON serialized feature collection"
          },
          "maxResolution": {
            "type": [
              "number",
              "null"
            ],
            "title": "The Maxresolution Schema",
            "default": "Number.Infinity",
            "examples": [
              8000
            ]
          },
          "minResolution": {
            "type": [
              "number",
              "null"
            ],
            "title": "The Minresolution Schema",
            "default": 0,
            "examples": [
              0
            ]
          },
          "url": {
            "type": "string",
            "title": "Url of WMS service",
            "description": "WMS service URL. Vector layers which are loaded from file, see #/properties/layers/items/properties/protocol/properties/url property",
            "default": "",
            "examples": [
              "https%3A%2F%2Fgeoportal.kraj-lbc.cz%2Fcgi-bin%2Fmapserv%3Fmap%3D%2Fdata%2Fgis%2FMapServer%2Fprojects%2Fwms%2Fatlas%2Fpuda.map%26"
            ],
            "pattern": "^(.*)$"
          },
          "urls": {
            "type": "array",
            "title": "Urls array of ArcGISRest service",
            "description": "Urls array of ArcGISRest service.",
            "default": "",
            "examples": [
              [
                "https://example.com/arcgis/rest/services/map_pub/MapServer"
              ]
            ]
          },
          "params": {
            "type": "object",
            "title": "The Params Schema",
            "properties": {
              "LAYERS": {
                "type": "string",
                "title": "WMS Layer. LAYERS parameter is mandatory for WMS services.",
                "default": "",
                "examples": [
                  "tridyochrany"
                ],
                "pattern": "^(.*)$"
              },
              "FORMAT": {
                "type": "string",
                "title": "Image format for WMS",
                "default": "",
                "examples": [
                  "image/png"
                ],
                "pattern": "^(.*)$"
              },
              "FROMCRS": {
                "type": "string",
                "title": "CRS used if serverside reprojection is needed",
                "default": "",
                "examples": [
                  "EPSG:3857"
                ],
                "pattern": "^(.*)$"
              },
              "VERSION": {
                "type": "string",
                "title": "The Version Schema",
                "default": "1.3.0",
                "examples": [
                  "1.3.0"
                ],
                "pattern": "^(.*)$"
              },
              "STYLES": {
                "type": "string",
                "title": "WMS Layer styles",
                "default": "",
                "examples": [
                  "default"
                ],
                "pattern": "^(.*)$"
              }
            }
          },
          "ratio": {
            "type": "number",
            "title": "Ratio of image requests",
            "description": "Not used by HsLayers yet. Ratio. 1 means image requests are the size of the map viewport, 2 means twice the width and height of the map viewport, and so on. Must be 1 or higher.",
            "default": 1.5,
            "examples": [
              1.5
            ]
          },
          "projection": {
            "type": "string",
            "title": "Projection of layer if it is different from the map projection for the whole application",
            "examples": [
              "EPSG:4326"
            ]
          },
          "style": {
            "type": "object",
            "title": "Style of vector layer features",
            "description": "",
            "examples": [
              {
                "stroke": {
                  "color": "rgba(238, 156, 150, 1)",
                  "width": 23
                },
                "fill": {
                  "color": "rgba(238, 156, 150, 1)"
                }
              },
              {
                "stroke": {
                  "color": "rgba(238, 156, 150, 1)",
                  "width": 23
                },
                "image": {
                  "src": "data:image/svg+xml;base64,PHN2ZyB4bWxuc\u003d\u003d",
                  "type": "icon"
                }
              }
            ]
          },
          "dimensions": {
            "type": "object",
            "title": "Dimensions for layer like time, depth etc.",
            "description": "dimensions for tile requests. This is an object with properties named like the advertised WMTS dimensions.",
            "examples": [
              {
                "time": {
                  "name": "time",
                  "values": "2016-01-01T12:00:00.000Z/2018-01-01T12:00:00.000Z/PT24H"
                },
                "elevation": {
                  "name": "elevation",
                  "label": "depth",
                  "values": [
                    1,
                    100,
                    1000
                  ]
                }
              }
            ]
          }
        }
      }
    },
    "current_base_layer": {
      "type": [
        "object",
        "null"
      ],
      "title": "Default base layer selected",
      "properties": {
        "title": {
          "type": "string",
          "title": "Title",
          "default": "",
          "examples": [
            "OpenStreetMap"
          ],
          "pattern": "^(.*)$"
        }
      },
      "examples": [
        {
          "title": "OpenStreetMap"
        }
      ]
    }
  }
}