{
  "id": "https://raw.githubusercontent.com/InfinniPlatform/InfinniPlatform/master/Files/Schema/appConfig.json",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "appConfig",
  "description": "InfinniPlatform application configuration.",
  "type": "object",
  "properties": {
    "app": {
      "description": "Настройки приложения.",
      "$ref": "#/definitions/app.json"
    },
    "mongodbDocumentStorage": {
      "description": "Настройки хранилища документов MongoDB.",
      "$ref": "#/definitions/mongodbDocumentStorage.json"
    },
    "fileSystemBlobStorage": {
      "description": "Настройки хранилища BLOB в файловой системе.",
      "$ref": "#/definitions/fileSystemBlobStorage.json"
    },
    "rabbitmqMessageQueue": {
      "description": "Настройки очереди сообщений на основе RabbitMQ.",
      "$ref": "#/definitions/rabbitmqMessageQueue.json"
    },
    "redisSharedCache": {
      "description": "Настройки распределенного кэша на основе Redis.",
      "$ref": "#/definitions/redisSharedCache.json"
    },
    "auth": {
      "description": "Настройки внутреннего провайдера аутентификации.",
      "$ref": "#/definitions/auth.json"
    },
    "quartzScheduler": {
      "description": "Настройки планировщика заданий Quartz.",
      "$ref": "#/definitions/quartzScheduler.json"
    },
    "printView": {
      "description": "Настройки печатных представлений.",
      "$ref": "#/definitions/printView.json"
    }
  },
  "definitions": {
    "app.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "app",
      "description": "The general application settings.",
      "type": "object",
      "properties": {
        "AppName": {
          "description": "The application name.",
          "type": "string",
          "default": "InfinniPlatform"
        },
        "AppInstance": {
          "description": "The application instance identifier.",
          "type": "string"
        },
        "StaticFilesMapping": {
          "description": "The relative request paths that map to static resources.",
          "type": "object",
          "properties": {}
        }
      },
      "required": [
        "AppName"
      ]
    },
    "mongodbDocumentStorage.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "mongodbDocumentStorage",
      "description": "Настройки хранилища документов MongoDB.",
      "type": "object",
      "properties": {
        "ConnectionString": {
          "description": "Строка подключения. Подробнее см. https://docs.mongodb.com/manual/reference/connection-string.",
          "type": "string",
          "default": "mongodb://localhost:27017"
        }
      },
      "required": [
        "ConnectionString"
      ]
    },
    "fileSystemBlobStorage.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "fileSystemBlobStorage",
      "description": "Настройки хранилища BLOB в файловой системе.",
      "type": "object",
      "properties": {
        "BaseDirectory": {
          "description": "Базовый каталог для хранения файлов системы.",
          "type": "string",
          "default": "BlobStorage"
        }
      },
      "required": [
        "BaseDirectory"
      ]
    },
    "rabbitmqMessageQueue.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "rabbitmqMessageQueue",
      "description": "Настройки очереди сообщений на основе RabbitMQ.",
      "type": "object",
      "properties": {
        "HostName": {
          "description": "Адрес или доменное имя.",
          "type": "string",
          "default": "localhost"
        },
        "Port": {
          "description": "Номер порта.",
          "type": "integer",
          "default": 5672
        },
        "UserName": {
          "description": "Имя пользователя.",
          "type": "string",
          "default": "guest"
        },
        "Password": {
          "description": "Пароль пользователя.",
          "type": "string",
          "default": "guest"
        },
        "ManagementApiPort": {
          "description": "Номер порта для RabbitMQ Management HTTP API.",
          "type": "integer",
          "default": 15672
        },
        "PrefetchCount": {
          "description": "Количество сообщений, единовременно передаваемых потребителю.",
          "type": "integer",
          "default": 1000
        },
        "MaxConcurrentThreads": {
          "description": "Максимальное количество одновременно обрабатываемых сообщений.",
          "type": "integer",
          "default": 200
        },
        "ReconnectTimeout": {
          "description": "Время между попытками переподключения к серверу RabbitMQ в cекундах.",
          "type": "integer",
          "default": 5
        },
        "MaxReconnectRetries": {
          "description": "Максимальное количество попыток переподключения к серверу RabbitMQ.",
          "type": "integer",
          "default": 10
        }
      },
      "required": [
        "HostName",
        "Port",
        "ManagementApiPort"
      ]
    },
    "redisSharedCache.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "redisSharedCache",
      "description": "Настройки распределенного кэша на основе Redis.",
      "type": "object",
      "properties": {
        "Host": {
          "description": "Адрес или доменное имя.",
          "type": "string",
          "default": "localhost"
        },
        "Port": {
          "description": "Номер порта.",
          "type": "integer",
          "default": 6379
        },
        "Database": {
          "description": "Номер базы данных.",
          "type": "integer",
          "default": 0
        },
        "Password": {
          "description": "Пароль подключения.",
          "type": "string"
        },
        "ReadBufferSize": {
          "description": "Размер буфера чтения.",
          "type": "integer",
          "default": 512
        },
        "WriteBufferSize": {
          "description": "Размер буфера записи.",
          "type": "integer",
          "default": 512
        },
        "ConnectionTimeout": {
          "description": "Таймаут подключения в миллисекундах (0 - отсутствие таймаута).",
          "type": "integer",
          "default": 0
        },
        "MaxReconnectRetries": {
          "description": "Количество попыток подключения.",
          "type": "integer",
          "default": 10
        },
        "PoolSize": {
          "description": "Размер пула подключений (0 - неограничен).",
          "type": "integer",
          "default": 0
        }
      },
      "required": [
        "Host",
        "Port"
      ]
    },
    "auth.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "auth",
      "description": "Настройки внутреннего провайдера аутентификации.",
      "type": "object",
      "properties": {
        "UserCacheTimeout": {
          "description": "Таймаут сброса кэша пользователей в минутах.",
          "type": "integer",
          "default": 30,
          "minimum": 1
        },
        "CookieDomain": {
          "description": "The domain name where the cookie is served.",
          "type": "string"
        }
      },
      "required": [
        "UserCacheTimeout"
      ]
    },
    "quartzScheduler.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "quartzScheduler",
      "description": "Настройки планировщика заданий Quartz.",
      "type": "object",
      "properties": {
        "ExpireHistoryAfter": {
          "description": "Время хранения информации о вызове обработчиков заданий (в секундах, по умолчанию - время хранения не ограничено)",
          "type": "integer"
        }
      }
    },
    "printView.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "printView",
      "description": "Настройки печатных представлений.",
      "type": "object",
      "properties": {
        "TempDirectory": {
          "description": "Каталог для хранения временных файлов при генерации HTML/PDF.",
          "type": "string"
        },
        "WkHtmlToPdfPath": {
          "description": "Местоположение утилиты wkhtmltopdf - http://wkhtmltopdf.org/.",
          "type": "string"
        },
        "WkHtmlToPdfArguments": {
          "description": "Формат аргументов утилиты wkhtmltopdf - http://wkhtmltopdf.org/.",
          "type": "string"
        }
      },
      "required": [
        "TempDirectory",
        "WkHtmlToPdfPath",
        "WkHtmlToPdfArguments"
      ]
    }
  }
}