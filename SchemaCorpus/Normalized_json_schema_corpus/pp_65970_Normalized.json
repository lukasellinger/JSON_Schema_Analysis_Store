{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Payment",
  "description": "PayPal payment json schema",
  "type": "object",
  "properties": {
    "id": {
      "description": "ID of the created payment. Value generated by PayPal.",
      "type": "string"
    },
    "intent": {
      "description": "Payment intent. Must be set to sale for immediate payment, authorize to authorize a payment for capture later, or order to create an order.",
      "type": "string",
      "enum": [
        "sale",
        "authorize",
        "order"
      ]
    },
    "payer": {
      "description": "Source of the funds for this payment represented by a PayPal account or a direct credit card.",
      "$ref": "#/definitions/payer.json"
    },
    "create_time": {
      "description": "Payment creation time as defined in RFC 3339 Section 5.6. Value generated by PayPal.",
      "type": "string"
    },
    "update_time": {
      "description": "Time that the resource was last updated. Value generated by PayPal.",
      "type": "string"
    },
    "state": {
      "description": "Payment state. Must be one of the following: created; approved; failed; pending; canceled; or expired. Value generated by PayPal.",
      "type": "string",
      "enum": [
        "created",
        "approved",
        "failed",
        "pending",
        "canceled",
        "expired"
      ]
    },
    "redirect_urls": {
      "oneOf": [
        {
          "$ref": "#/definitions/redirect_urls.json"
        }
      ]
    },
    "transactions": {
      "description": "Transactional details including the amount and item details.",
      "type": "array",
      "items": {
        "oneOf": [
          {
            "$ref": "#/definitions/transaction.json"
          }
        ]
      }
    },
    "links": {
      "type": "array",
      "items": {
        "oneOf": [
          {
            "$ref": "#/definitions/link.json"
          }
        ]
      }
    }
  },
  "required": [
    "intent",
    "id",
    "transactions",
    "payer"
  ],
  "definitions": {
    "payer.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Payer",
      "description": "PayPal payer json schema",
      "type": "object",
      "properties": {
        "payment_method": {
          "description": "Payment method used. Must be either credit_card or paypal.",
          "type": "string",
          "enum": [
            "credit_card",
            "paypal"
          ]
        },
        "funding_instruments": {
          "description": "A list of funding instruments for the current payment",
          "type": "array",
          "items": {
            "oneOf": [
              null,
              {
                "$ref": "#/definitions/funding_instruments_credit_card.json"
              },
              {
                "$ref": "#/definitions/funding_instruments_stored_credit_card.json"
              },
              {
                "$ref": "#/definitions/funding_instruments_credit_card_token.json"
              }
            ]
          }
        },
        "payer_info": {
          "$ref": "#/definitions/payer_info.json"
        },
        "status": {
          "type": "string",
          "enum": [
            "VERIFIED",
            "UNVERIFIED"
          ]
        }
      },
      "required": [
        "payment_method"
      ]
    },
    "funding_instruments_credit_card.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Credit card funding instrument",
      "description": "PayPal credit card funding instrument json schema",
      "type": "object",
      "properties": {
        "id": {
          "description": "ID of the credit card. This ID is provided in the response when storing credit cards.",
          "type": "string"
        },
        "payer_id": {
          "description": "A unique identifier that you can assign and track when storing a credit card or using a stored credit card. This ID can help to avoid unintentional use or misuse of credit cards. This ID can be any value you would like to associate with the saved card, such as a UUID, username, or email address.",
          "type": "string"
        },
        "number": {
          "description": "Credit card number. Numeric characters only with no spaces or punctuation. The string must conform with modulo and length required by each credit card type.",
          "type": "string",
          "pattern": "^([\\d]+)$"
        },
        "type": {
          "description": "Credit card type. Valid types are: visa, mastercard, discover, amex",
          "type": "string",
          "enum": [
            "visa",
            "mastercard",
            "discover",
            "amex"
          ]
        },
        "expire_month": {
          "description": "Expiration month with no leading zero. Acceptable values are 1 through 12.",
          "type": "number",
          "minimum": 0,
          "maximum": 12
        },
        "expire_year": {
          "description": "4-digit expiration year.",
          "type": "string",
          "pattern": "^([\\d]{4})$"
        },
        "cvv2": {
          "description": "3-4 digit card validation code.",
          "type": "string",
          "pattern": "^([\\d]{3,4})$"
        },
        "first_name": {
          "description": "Cardholder’s first name.",
          "type": "string"
        },
        "last_name": {
          "description": "Cardholder’s last name.",
          "type": "string"
        },
        "billing_address": {
          "$ref": "#/definitions/address.json"
        },
        "external_customer_id": {
          "description": "A unique identifier of the customer to whom this bank account belongs. Generated and provided by the facilitator.",
          "type": "string"
        },
        "merchant_id": {
          "description": "A user-provided, optional field that functions as a unique identifier for the merchant holding the card. Note that this has no relation to PayPal merchant id.",
          "type": "string"
        },
        "external_card_id": {
          "description": "A unique identifier of the bank account resource. Generated and provided by the facilitator so it can be used to restrict the usage of the bank account to the specific merchant.",
          "type": "string"
        },
        "create_time": {
          "description": "Resource creation time in ISO8601 date-time format ",
          "type": "string"
        },
        "update_time": {
          "description": "Resource update time in ISO8601 date-time format",
          "type": "string"
        },
        "state": {
          "description": "Cardholder’s last name.State of the credit card funding instrument: expired or ok. Value generated by PayPal.",
          "type": "string",
          "enum": [
            "ok",
            "expired"
          ]
        },
        "valid_until": {
          "description": "Funding instrument expiration date. Value generated by PayPal.",
          "type": "string"
        }
      },
      "required": [
        "number",
        "type",
        "expire_month",
        "expire_year"
      ]
    },
    "address.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Address",
      "description": "PayPal address json schema",
      "type": "object",
      "properties": {
        "line1": {
          "description": "Line 1 of the address (e.g., Number, street, etc). 100 characters max",
          "type": "string",
          "maxLength": 100
        },
        "line2": {
          "description": "Line 2 of the address (e.g., Suite, apt #, etc). 100 characters max.",
          "type": "string",
          "maxLength": 100
        },
        "city": {
          "description": "City name. 50 characters max.",
          "type": "string",
          "maxLength": 50
        },
        "country_code": {
          "description": "2-letter country code. 2 characters max.",
          "type": "string",
          "maxLength": 2
        },
        "postal_code": {
          "description": "Zip code or equivalent is usually required for countries that have them. 20 characters max. Required in certain countries.",
          "type": "string",
          "maxLength": 20
        },
        "state": {
          "description": "2-letter code for US states, and the equivalent for other countries. 100 characters max.",
          "type": "string",
          "maxLength": 100
        },
        "phone": {
          "description": "Phone number in E.123 format.",
          "type": "string",
          "maxLength": 50
        }
      },
      "required": [
        "line1",
        "city",
        "country_code"
      ]
    },
    "funding_instruments_stored_credit_card.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Stored credit card funding instrument",
      "description": "PayPal stored credit card funding instrument json schema",
      "type": "object",
      "properties": {
        "id": {
          "description": "ID of the credit card. This ID is provided in the response when storing credit cards.",
          "type": "string"
        },
        "payer_id": {
          "description": "A unique identifier that you can assign and track when storing a credit card or using a stored credit card. This ID can help to avoid unintentional use or misuse of credit cards. This ID can be any value you would like to associate with the saved card, such as a UUID, username, or email address.",
          "type": "string"
        },
        "number": {
          "description": "Credit card number. Numeric characters only with no spaces or punctuation. The string must conform with modulo and length required by each credit card type.",
          "type": "string",
          "pattern": "^([\\d]+)$"
        },
        "type": {
          "description": "Credit card type. Valid types are: visa, mastercard, discover, amex",
          "type": "string",
          "enum": [
            "visa",
            "mastercard",
            "discover",
            "amex"
          ]
        },
        "expire_month": {
          "description": "Expiration month with no leading zero. Acceptable values are 1 through 12.",
          "type": "number",
          "minimum": 0,
          "maximum": 12
        },
        "expire_year": {
          "description": "4-digit expiration year.",
          "type": "string",
          "pattern": "^([\\d]{4})$"
        },
        "cvv2": {
          "description": "3-4 digit card validation code.",
          "type": "string",
          "pattern": "^([\\d]{3,4})$"
        },
        "first_name": {
          "description": "Cardholder’s first name.",
          "type": "string"
        },
        "last_name": {
          "description": "Cardholder’s last name.",
          "type": "string"
        },
        "billing_address": {
          "$ref": "#/definitions/address.json"
        },
        "external_customer_id": {
          "description": "A unique identifier of the customer to whom this bank account belongs. Generated and provided by the facilitator.",
          "type": "string"
        },
        "merchant_id": {
          "description": "A user-provided, optional field that functions as a unique identifier for the merchant holding the card. Note that this has no relation to PayPal merchant id.",
          "type": "string"
        },
        "external_card_id": {
          "description": "A unique identifier of the bank account resource. Generated and provided by the facilitator so it can be used to restrict the usage of the bank account to the specific merchant.",
          "type": "string"
        },
        "create_time": {
          "description": "Resource creation time in ISO8601 date-time format ",
          "type": "string"
        },
        "update_time": {
          "description": "Resource update time in ISO8601 date-time format",
          "type": "string"
        },
        "state": {
          "description": "Cardholder’s last name.State of the credit card funding instrument: expired or ok. Value generated by PayPal.",
          "type": "string",
          "enum": [
            "ok",
            "expired"
          ]
        },
        "valid_until": {
          "description": "Funding instrument expiration date. Value generated by PayPal.",
          "type": "string"
        }
      },
      "required": [
        "id",
        "number",
        "type",
        "expire_month",
        "expire_year"
      ]
    },
    "funding_instruments_credit_card_token.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Credit card token funding instrument",
      "description": "PayPal credit card token funding instrument json schema",
      "type": "object",
      "properties": {
        "credit_card_id": {
          "description": "ID of credit card previously stored using /vault/credit-card",
          "type": "string"
        },
        "payer_id": {
          "description": "A unique identifier that you can assign and track when storing a credit card or using a stored credit card. This ID can help to avoid unintentional use or misuse of credit cards. This ID can be any value you would like to associate with the saved card, such as a UUID, username, or email address. Required when using a stored credit card if a payer_id was originally provided when storing the credit card in vault.",
          "type": "string"
        },
        "last4": {
          "description": "Last four digits of the stored credit card number. Value generated by PayPal.",
          "type": "string"
        },
        "type": {
          "description": "Credit card type. Valid types are: visa, mastercard, discover, amex. Values are presented in lowercase and not should not be used for display. Value generated by PayPal.",
          "type": "string",
          "enum": [
            "visa",
            "mastercard",
            "discover",
            "amex"
          ]
        },
        "expire_year": {
          "description": "4-digit expiration year. Value generated by PayPal.",
          "type": "number",
          "pattern": "^([\\d]{4})$"
        },
        "expire_month": {
          "description": "Expiration month with no leading zero. Acceptable values are 1 through 12. Value generated by PayPal.",
          "type": "number",
          "minimum": 0,
          "maximum": 12
        }
      },
      "required": [
        "credit_card_id"
      ]
    },
    "payer_info.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Payer info",
      "description": "PayPal payer info json schema",
      "type": "object",
      "properties": {
        "email": {
          "description": "Email address representing the payer. 127 characters max.",
          "type": "string",
          "maxLength": 127
        },
        "salutation": {
          "type": "string"
        },
        "first_name": {
          "description": "First name of the payer. Value generated by PayPal.",
          "type": "string"
        },
        "middle_name": {
          "description": "Middle name of the payer. Value generated by PayPal.",
          "type": "string"
        },
        "last_name": {
          "description": "Last name of the payer. Vaelue gnerated by PayPal.",
          "type": "string"
        },
        "suffix": {
          "description": "Suffix of the payer",
          "type": "string"
        },
        "payer_id": {
          "description": "PayPal assigned Payer ID. Vaelue gnerated by PayPal.",
          "type": "string"
        },
        "phone": {
          "description": "Phone number representing the payer. 20 characters max.",
          "type": "string",
          "maxLength": 20
        },
        "country_code": {
          "description": "Two-letter registered country code of the payer to identify the buyer country.",
          "type": "string",
          "maxLength": 2
        },
        "shipping_address": {
          "$ref": "#/definitions/shipping_address.json"
        },
        "tax_id_type": {
          "description": "Payer’s tax ID type. ",
          "type": "string",
          "enum": [
            "BR_CPF",
            "BR_CNPJ"
          ]
        },
        "tax_id": {
          "description": "Payer’s tax ID",
          "type": "string"
        }
      }
    },
    "shipping_address.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Shipping Address",
      "description": "PayPal shipping_address json schema",
      "type": "object",
      "properties": {
        "recipient_name": {
          "description": "Name of the recipient at this address. 50 characters max.",
          "type": "string",
          "maxLength": 50
        },
        "type": {
          "description": "Address type. Must be one of the following: residential, business, or mailbox.",
          "type": "string",
          "enum": [
            "residential",
            "business",
            "mailbox"
          ]
        },
        "line1": {
          "description": "Line 1 of the address (e.g., Number, street, etc). 100 characters max.",
          "type": "string",
          "maxLength": 100
        },
        "line2": {
          "description": "Line 2 of the address (e.g., Suite, apt #, etc). 100 characters max.",
          "type": "string",
          "maxLength": 100
        },
        "city": {
          "description": "City name. 50 characters max.",
          "type": "string",
          "maxLength": 50
        },
        "country_code": {
          "description": "2-letter country code. 2 characters max",
          "type": "string",
          "maxLength": 2,
          "minLength": 2
        },
        "postal_code": {
          "description": "Zip code or equivalent is usually required for countries that have them. 20 characters max.",
          "type": "string",
          "maxLength": 20
        },
        "state": {
          "description": "2-letter code for US states, and the equivalent for other countries. 100 characters max.",
          "type": "string",
          "maxLength": 100
        },
        "phone": {
          "description": "Phone number in E.123 format. 50 characters max.",
          "type": "string",
          "maxLength": 50
        }
      },
      "require": [
        "recipient_name",
        "line1",
        "city",
        "country_code"
      ]
    },
    "redirect_urls.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Redirect urls",
      "description": "PayPal redirect urls json schema",
      "type": "object",
      "properties": {
        "return_url": {
          "description": "The payer is redirected to this URL after approving the payment.",
          "type": "string",
          "format": "uri"
        },
        "cancel_url": {
          "description": "The payer is redirected to this URL after canceling the payment.",
          "type": "string",
          "format": "uri"
        }
      },
      "required": [
        "return_url",
        "cancel_url"
      ]
    },
    "transaction.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Transaction",
      "description": "PayPal transaction json schema",
      "type": "object",
      "properties": {
        "amount": {
          "$ref": "#/definitions/amount.json"
        },
        "description": {
          "description": "Description of transaction. 127 characters max.",
          "type": "string",
          "maxLength": 127
        },
        "item_list": {
          "$ref": "#/definitions/item_list.json"
        },
        "related_resources": {
          "description": "Financial transactions related to a payment.",
          "type": "array"
        },
        "invoice_number": {
          "description": "Invoice number used to track the payment. Only supported when thepayment_method is set to paypal.",
          "type": "string",
          "maxLength": 256
        },
        "custom": {
          "description": "Free-form field for the use of clients. Only supported when thepayment_method is set to paypal.",
          "type": "string",
          "maxLength": 256
        },
        "soft_descriptor": {
          "description": "Soft descriptor used when charging this funding source. Only supported when thepayment_method is set to paypal.",
          "type": "string",
          "maxLength": 22
        },
        "payment_options": {
          "$ref": "#/definitions/payment_options.json"
        }
      },
      "required": [
        "amount"
      ]
    },
    "amount.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Amount",
      "description": "PayPal amount json schema",
      "type": "object",
      "properties": {
        "currency": {
          "description": "3-letter currency code. PayPal does not support all currencies.",
          "type": "string",
          "minLength": 3,
          "maxLength": 3
        },
        "total": {
          "description": "Total amount charged from the payer to the payee. In case of a refund, this is the refunded amount to the original payer from the payee. 10 characters max with support for 2 decimal places.",
          "type": "string",
          "maxLength": 10
        },
        "details": {
          "type": "object",
          "properties": {
            "shipping": {
              "type": "string",
              "maxLength": 10
            },
            "subtotal": {
              "type": "string",
              "maxLength": 10
            },
            "tax": {
              "type": "string",
              "maxLength": 10
            },
            "handling_fee": {
              "type": "string"
            },
            "insurance": {
              "type": "string"
            },
            "shipping_discount": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "required": [
        "currency",
        "total"
      ]
    },
    "item_list.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Item list",
      "description": "PayPal item_list json schema",
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/item.json"
              }
            ]
          }
        },
        "shipping_address": {
          "$ref": "#/definitions/shipping_address.json"
        }
      }
    },
    "item.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Item",
      "description": "PayPal item json schema",
      "type": "object",
      "properties": {
        "quantity": {
          "description": "Number of a particular item. 10 characters max.",
          "type": "string",
          "maxLength": 10
        },
        "name": {
          "description": "Item name. 127 characters max.",
          "type": "string",
          "maxLength": 127
        },
        "price": {
          "description": "Item cost. 10 characters max.",
          "type": "string",
          "maxLength": 10
        },
        "currency": {
          "description": "3-letter currency code.",
          "type": "string",
          "maxLength": 3
        },
        "sku": {
          "description": "Stock keeping unit corresponding (SKU) to item. 50 characters max.",
          "type": "string",
          "maxLength": 50
        },
        "description": {
          "type": "string",
          "maxLength": 127
        },
        "tax": {
          "type": "string"
        }
      },
      "required": [
        "quantity",
        "name",
        "price",
        "currency"
      ]
    },
    "payment_options.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Payment options",
      "description": "payment options json schema",
      "type": "object",
      "properties": {
        "allowed_payment_method": {
          "type": "string",
          "enum": [
            "INSTANT_FUNDING_SOURCE"
          ]
        }
      }
    },
    "link.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Link",
      "description": "PayPal link json schema",
      "type": "object",
      "properties": {
        "href": {
          "description": "URL of the related HATEOAS link you can use for subsequent calls.",
          "type": "string"
        },
        "rel": {
          "description": "Link relation that describes how this link relates to the previous call. Examples include self (get details of the current call), parent_payment (get details of the parent payment), or a related call such as execute or refund.",
          "type": "string"
        },
        "method": {
          "description": "The HTTP method required for the related call.",
          "type": "string"
        }
      },
      "required": [
        "href",
        "rel",
        "method"
      ]
    }
  }
}