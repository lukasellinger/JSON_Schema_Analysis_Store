{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Scenario Reasoner input for scenarios.evaluate method",
  "type": "object",
  "properties": {
    "method": {
      "description": "The method of the scenario reasoner being called",
      "type": "string",
      "enum": [
        "evaluate"
      ]
    },
    "params": {
      "type": "array",
      "minItems": 1,
      "maxItems": 1,
      "items": {
        "$ref": "#/definitions/state.schema.json"
      }
    },
    "id": {
      "description": "A value identifying this request"
    },
    "encoding": {
      "description": "The encoding of the data",
      "type": "string",
      "enum": [
        "json"
      ]
    }
  },
  "additionalProperties": false,
  "required": [
    "method",
    "params",
    "encoding"
  ],
  "definitions": {
    "state.schema.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "description": "An Ideas state",
      "type": "array",
      "minItems": 4,
      "maxItems": 4,
      "items": [
        {
          "description": "The unique identifier for the scenario",
          "type": "string",
          "example": "gmd4"
        },
        {
          "description": "The location in the internal strategy. Implementation-specific, do not parse this value.",
          "type": "string"
        },
        {
          "$ref": "#/definitions/scenariostate.schema.json"
        },
        {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      ],
      "additionalItems": false
    },
    "scenariostate.schema.json": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "description": "A state for the scenario",
      "type": "object",
      "properties": {
        "parameters": {
          "description": "The values for the parameters",
          "type": "object",
          "properties": {
            "userDefined": {
              "type": "object",
              "properties": {
                "independent": {
                  "type": "object",
                  "patternProperties": {
                    "^p([0-9]+)|t$": {}
                  },
                  "additionalProperties": false,
                  "example": {
                    "p1": false,
                    "p2": 0,
                    "p3": "A string"
                  }
                },
                "perCharacter": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              },
              "required": [
                "independent",
                "perCharacter"
              ]
            },
            "fixed": {
              "type": "object",
              "properties": {
                "independent": {
                  "type": "object"
                },
                "perCharacter": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              },
              "required": [
                "independent",
                "perCharacter"
              ]
            }
          }
        },
        "statement": {
          "type": [
            "object",
            "null"
          ],
          "description": "Statement will be present in output, but is not required in input",
          "properties": {
            "type": {
              "description": "The statement type: whether it is for a computer or a player",
              "type": "string",
              "enum": [
                "player",
                "computer",
                "situation"
              ]
            },
            "text": {
              "description": "The actual text for the statement",
              "type": "string"
            },
            "character": {
              "description": "The character this statement belongs to, if any",
              "type": "string"
            },
            "propertyValues": {
              "description": "The property values belonging to this statement",
              "type": "object",
              "properties": {
                "independent": {
                  "type": "object"
                },
                "perCharacter": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              },
              "required": [
                "independent",
                "perCharacter"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "type",
            "text",
            "propertyValues"
          ]
        },
        "internal": {
          "type": "object",
          "description": "This property contains internal data for the ScenarioReasoner and must not be removed from the state. Internal is not always present in output; when it is, it must be sent back in input"
        }
      },
      "required": [
        "parameters"
      ]
    }
  }
}